(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9203)}])},9203:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n(828),s=n(5893),c=n(7568),r=n(655),i=n(5503),o=n(4642),l=(0,i.ZF)({apiKey:"AIzaSyA41mHLaNc1C9Cw-B07AYVuI_rh8f3Cx7g",authDomain:"just-in-time-5698c.firebaseapp.com",databaseURL:"https://just-in-time-5698c-default-rtdb.firebaseio.com",projectId:"just-in-time-5698c",storageBucket:"just-in-time-5698c.appspot.com",messagingSenderId:"162813204267",appId:"1:162813204267:web:0234c4cc89dbfe1a61976e",measurementId:"G-QQ6S8Z137D"}),u=(0,o.N8)(l);function d(){return(d=(0,c.Z)(function(e,t,n,a,s,c,i){var l,u,d,h;return(0,r.__generator)(this,function(n){switch(n.label){case 0:l=(0,o.N8)(),u={author:e,title:i,content:t,resource:!1,time:a,type:s,category:c},d=(0,o.VF)((0,o.iU)((0,o.iH)(l,"Posts"),"Post")).key,(h={})["/Post"+d]=u,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,o.Vx)((0,o.iH)(l,"Posts"),h)];case 2:return[2,n.sent()];case 3:return n.sent(),alert("Unauthorized Access!"),[3,4];case 4:return[2]}})})).apply(this,arguments)}function h(){return(h=(0,c.Z)(function(e){var t,n;return(0,r.__generator)(this,function(a){switch(a.label){case 0:t=(0,o.N8)(),n="Posts/"+e,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,o.Od)((0,o.iH)(t,n))];case 2:return[2,a.sent()];case 3:return a.sent(),alert("Unauthorized Access!"),[3,4];case 4:return[2]}})})).apply(this,arguments)}var f=n(7294);function g(e){return(0,s.jsx)("div",{className:"insert-select"+e.class,children:(0,s.jsxs)("select",{onChange:e.callback,defaultValue:e.selectvalue,children:[(0,s.jsx)("option",{value:"Workplace Updates",children:"Workplace Updates"}),(0,s.jsx)("option",{value:"Policy Links",children:"Policy Links"}),(0,s.jsx)("option",{value:"Instructional Videos",children:"Instructional Videos"}),(0,s.jsx)("option",{value:"Useful Sites",children:"Useful Sites"}),(0,s.jsx)("option",{value:"Helpful Reading",children:"Helpful Reading"}),(0,s.jsx)("option",{value:"Staff Events",children:"Staff Events"}),(0,s.jsx)("option",{value:"Other",children:"Other"})]})})}var v=n(6154);function p(e){var t=(0,a.Z)((0,f.useState)(""),2),n=t[0],c=t[1],r=(0,a.Z)((0,f.useState)("ALL"===e.category?"Workplace Updates":e.category),2),i=r[0],l=r[1],h=(0,a.Z)((0,f.useState)(""),2),p=h[0],x=h[1],m=function(e,t,n){v.Z.post("/api/sendNotification",{title:e,notificationBody:t,topic:n}).then(function(e){console.log("notification sent ",e)},function(e){console.log(e)})};return(0,s.jsxs)("div",{className:"insert-atom",children:[(0,s.jsx)("h2",{className:"insert-title",children:"New post from"}),(0,s.jsx)("input",{ref:e.refEl,className:"insert-title-input",placeholder:"Title",type:"text",onInput:function(e){return x(e.target.value)}}),(0,s.jsx)("textarea",{className:"insert-textarea",placeholder:"Content",type:"text",onInput:function(e){c(e.target.value)}}),(0,s.jsxs)("div",{className:"insert-category-containter",children:[(0,s.jsx)(g,{callback:function(e){return l(e.target.value)},selectvalue:e.category,class:"-insert"}),(0,s.jsx)("button",{type:"button",className:"insert-submit-button",onClick:function(){var t=new Date;new Promise(function(e,t){try{var n,a=(0,o.iH)(u,"Posts_number/"+i);(0,o.jM)(a,function(t){t.exists()?(n=t.val(),e(n)):e(null)})}catch(e){t(e)}}).then(function(a){if(e.category!==i&&e.setCategory("ALL"),function(e,t,n,a,s,c,r){d.apply(this,arguments)}("TeamJ_temp",n,!1,t.toLocaleDateString()+" "+t.toLocaleTimeString(),"text",i,""===p?i+" #"+a:p),""!==p){var s,c;s=(0,o.N8)(),(c={})["/"+i]=a+1,(0,o.Vx)((0,o.iH)(s,"Posts_number"),c)}}),m(p,n,i),e.callback()},children:"Submit"}),(0,s.jsx)("button",{type:"button",className:"insert-cancel-button",onClick:e.callback,children:"Cancel"})]})]})}function x(e){var t=(0,a.Z)((0,f.useState)(!1),2),n=t[0],c=t[1],r=(0,f.useRef)(null);return(0,f.useEffect)(function(){r.current&&r.current.focus()},[n]),(0,s.jsx)("div",{className:"insert-main-container",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"insert-container",children:(0,s.jsx)(p,{callback:function(){return c(!n)},refEl:r,category:e.category,setCategory:e.setCategory})}),(0,s.jsxs)("div",{className:"insert-button-container",children:[" ",(0,s.jsxs)("button",{className:"insert-button",type:"button",onClick:function(){return c(!n)},children:[" ","+ Insert new post"]})]})]}):(0,s.jsxs)("div",{className:"insert-button-container",children:[" ",(0,s.jsxs)("button",{className:"insert-button",type:"button",onClick:function(){return c(!n)},children:[" ","+ Insert new post"]})]})})}var m=n(3731),y=function(e){var t=new Date("string"==typeof e?e.replace(/-/g,"/"):e),n=t.toLocaleDateString("en-us",{month:"long"}),a=t.getDate(),s=t.toLocaleTimeString().replace(/([\d]+:[\d]{2})(:[\d]{2})(.*)/,"$1$3");return"".concat(n," ").concat(a).concat(new Date().getFullYear()!==t.getFullYear()?", "+t.getFullYear():""," at ").concat(s)};function b(e){var t=(0,a.Z)((0,f.useState)(!1),2),n=t[0],c=t[1],r=(0,a.Z)((0,f.useState)(e.val[1].category),2),i=r[0],l=r[1],u=(0,a.Z)((0,f.useState)(e.val[1].content),2),d=u[0],v=u[1],p=(0,f.useRef)(null);return(0,f.useEffect)(function(){p.current&&(p.current.focus(),p.current.selectionStart=p.current.value.length,p.current.selectionEnd=p.current.value.length)},[n]),(0,s.jsxs)("div",{className:"content-page",children:[(0,s.jsx)("div",{className:"content-panel",style:{backgroundColor:function(e){var t="#00594C";switch(e){case void 0:case"Workplace Updates":t="#00594C";break;case"Policy Links":t="#EF426F";break;case"Instructional Videos":t="#4F758B";break;case"Useful Sites":t="#A8673E";break;case"Helpful Reading":t="#00A5AD";break;case"Staff Events":t="#13294B";break;default:t="#4a4e4d"}return t}(e.val[1].category),display:"flex",flexDirection:"column",justifyContent:"center"},children:void 0===e.val[1]?"":" "+y(e.val[1].time)}),(0,s.jsxs)("div",{className:"atom-main",children:[(0,s.jsx)("h2",{className:"atom-category",children:void 0===e.val[1]?"":e.val[1].title}),(0,s.jsxs)("p",{children:[(0,s.jsx)("b",{children:"Author:"})," ",void 0===e.val[1]?"":e.val[1].author]}),(0,s.jsxs)("div",{className:"content",children:[n?(0,s.jsxs)("div",{className:"content-edit",children:[(0,s.jsx)("textarea",{id:"content-txt",value:d,onChange:function(e){return v(e.target.value)}}),(0,s.jsx)(g,{callback:function(e){return l(e.target.value)},class:"-edit",selectvalue:i}),(0,s.jsx)("button",{onClick:function(){var t,a,s=e.val[0],r=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString();t=(0,o.N8)(),(a={})["/content"]=d,a["/time"]=r,a["/category"]=i,(0,o.Vx)((0,o.iH)(t,"Posts/"+s),a).catch(function(e){alert("Unauthorized Access!")}),c(!n)},children:" Save "})]}):(0,s.jsx)(m.Z,{componentDecorator:function(e,t,n){return(0,s.jsx)("a",{target:"blank",href:e,children:t},n)},children:(0,s.jsxs)("div",{className:"content-actual",children:[d||""," "]})}),(0,s.jsx)("br",{})]},e.index+""),(0,s.jsxs)("div",{className:"atom-action",children:[(0,s.jsxs)("button",{type:"button",onClick:function(){return c(!n)},children:[" ",n?"Cancel":"Edit"," "]}),(0,s.jsx)("button",{type:"button",onClick:function(){(function(e){h.apply(this,arguments)})(e.val[0]),c(!1)},children:"Delete"})]})]})]})}function j(e){return(0,s.jsxs)("div",{className:"sub-main-container",children:[(0,s.jsx)("h1",{children:"UNC Center for Nursing Excellence"}),(0,s.jsx)("h2",{children:"Just in Time Feed"}),(0,s.jsx)("h2",{children:e.category}),e.insertButton,e.entries&&0!==e.entries.length?e.entries.map(function(t,n){return(0,s.jsx)(b,{currentCategory:e.category,val:t,index:n,entriesCallback:e.entriesCallback},t)}):(0,s.jsx)("h3",{children:"No entries"})]})}function N(e){return(0,s.jsxs)("div",{className:"feed-container",children:[(0,s.jsx)("div",{className:"sidebar-placeholder"}),(0,s.jsxs)("div",{className:"category-button-container",children:[(0,s.jsx)("h2",{style:{fontWeight:"600"},children:"Filter by Category"}),(0,s.jsx)("button",{className:"category-button".concat("ALL"===e.category?"-selected":""),onClick:function(t){e.setCategory(t.target.value)},type:"button",value:"ALL",children:"All Categories"}),(0,s.jsx)("button",{className:"category-button".concat("Workplace Updates"===e.category?"-selected":""),onClick:function(t){e.setCategory(t.target.value)},type:"button",value:"Workplace Updates",children:"Workplace Updates"}),(0,s.jsx)("button",{className:"category-button".concat("Policy Links"===e.category?"-selected":""),onClick:function(t){e.setCategory(t.target.value)},type:"button",value:"Policy Links",children:"Policy Links"}),(0,s.jsx)("button",{className:"category-button".concat("Instructional Videos"===e.category?"-selected":""),onClick:function(t){e.setCategory(t.target.value)},type:"button",value:"Instructional Videos",children:"Instructional Videos"}),(0,s.jsx)("button",{className:"category-button".concat("Useful Sites"===e.category?"-selected":""),onClick:function(t){e.setCategory(t.target.value)},type:"button",value:"Useful Sites",children:"Useful Sites"}),(0,s.jsx)("button",{className:"category-button".concat("Helpful Reading"===e.category?"-selected":""),onClick:function(t){e.setCategory(t.target.value)},type:"button",value:"Helpful Reading",children:"Helpful Reading"}),(0,s.jsx)("button",{className:"category-button".concat("Staff Events"===e.category?"-selected":""),onClick:function(t){e.setCategory(t.target.value)},type:"button",value:"Staff Events",children:"Staff Events"}),(0,s.jsx)("button",{className:"category-button".concat("Other"===e.category?"-selected":""),onClick:function(t){e.setCategory(t.target.value)},type:"button",value:"Other",children:"Other Resources"})]}),(0,s.jsx)(j,{category:e.category,entries:e.globalEntries,entriesCallback:e.setEntries,insertButton:e.insertButton})]})}var k=n(6305),C=n(7702);function S(e,t,n,a,s){if(null==t||""==t)throw"Invalid Login";var c=(0,C.v0)();e?(0,C.Xb)(c,t,n).then(function(e){e.user,a(!0)}).catch(function(e){console.log(e.code);try{w(e.code,s)}catch(e){alert(e)}e.code,e.message}):(0,C.e5)(c,t,n).then(function(e){console.log(e.user),a(!0)}).catch(function(e){e.code,e.message,console.log(e.code);try{w(e.code,s)}catch(e){alert(e)}})}function w(e,t){if(null==e||""==e)throw"Invalid error code";switch(e){case"auth/email-already-in-use":t("Email already registed, log in instead");break;case"auth/invalid-email":case"auth/wrong-password":t("Invalid email or password");break;case"auth/user-not-found":t("User not found")}}function L(e){var t=(0,a.Z)((0,f.useState)(!1),2),n=t[0],c=t[1],r=(0,a.Z)((0,f.useState)(""),2),i=r[0],o=r[1];return(0,s.jsx)("div",{className:"login-flex-container",children:(0,s.jsxs)("div",{className:"login-container",children:[(0,s.jsx)("h1",{className:"login",children:"UNC Center for Nursing Excellence"}),(0,s.jsx)("div",{id:"firebaseui-auth-container"}),(0,s.jsx)("h2",{id:"loader",className:"login",children:"Just In Time Application"}),n?(0,s.jsx)("h2",{children:"Create Account"}):(0,s.jsx)("h2",{children:"Sign In"}),(0,s.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),n){if(t.target[1].value!==t.target[2].value){alert("Unmatched passwords!");return}S(n,t.target[0].value,t.target[1].value,e.callback,o)}else S(n,t.target[0].value,t.target[1].value,e.callback,o);return!1},children:[(0,s.jsxs)("div",{className:"login-input-container",children:[(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{className:"login-input",type:"text",minLength:"10",required:!0})]}),(0,s.jsxs)("div",{className:"login-input-container",children:[(0,s.jsx)("label",{children:"Password"}),(0,s.jsx)("input",{className:"login-input",type:"password",minLength:"7",required:!0})]}),n?(0,s.jsxs)("div",{className:"login-input-container",children:[(0,s.jsx)("label",{children:"Confirm Password"}),(0,s.jsx)("input",{className:"login-input",type:"password",minLength:"7",required:!0})]}):null,(0,s.jsx)("br",{}),(0,s.jsx)("button",{type:"button",onClick:function(e){c(!n)},children:n?"Cancel":"Create Account"}),(0,s.jsx)("button",{type:"submit",children:n?"Sign Up":"Login"})]}),(0,s.jsx)("h2",{children:i})]})})}var E=function(){var e=(0,a.Z)((0,f.useState)("ALL"),2),t=e[0],n=e[1],c=(0,a.Z)((0,f.useState)([]),2),r=c[0],i=c[1],l=(0,a.Z)((0,f.useState)([]),2),d=l[0],h=l[1],g=(0,a.Z)((0,f.useState)(!1),2),v=g[0],p=g[1];(0,f.useEffect)(function(){!function(e){try{var t=(0,o.iH)(u,"Posts"),n=[];(0,o.jM)(t,function(t){t.exists()&&(n=[],t.forEach(function(e){var t=[e.key,e.val()];n.push(t)})),e(n)})}catch(e){console.log(e)}}(i)},[v]),(0,f.useEffect)(function(){var e;h((e=[],r&&0!==r.length?(e=(0,k.Z)(r).sort(function(e,t){var n=e[1].time,a=new Date(n);return n=t[1].time,new Date(n).getTime()-a.getTime()})).filter(function(e){return"ALL"===t||void 0!==e[1].category&&e[1].category===t}):e))},[r,t]);var m=(0,s.jsx)(x,{category:t,setCategory:n});return(0,s.jsx)("div",{className:"App",children:v?(0,s.jsx)("div",{className:"feed",children:(0,s.jsx)(N,{setCategory:n,category:t,globalEntries:d,insertButton:m})}):(0,s.jsx)("div",{children:(0,s.jsx)(L,{callback:p})})})}}},function(e){e.O(0,[627,590,807,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);